
version: 2

models:
  - name: dim_store
    description: |
      A dimension table containing all relevant attributes of stores. 
  - name: dim_census_division
    description: |
      A dimension table containing all relevant attributes of a Canadian census division.
    columns:
      - name: id
        description: |
          The unique identifier for the census division directly obtained from the `cduid`
          in the statcan source
      - name: census_division_name
        description: |
          This string specifies the census division each store resides in, where each census division is a StatCan-designated geographic subregion.
          The PostGIS extension is used to locate each store within a census division, and this not null test verifies that each store has in fact been
          associated with a census division. The set of all census divisions form a mutually disjoint cover of all of Canada, and hence each store
          should be located within exactly one census division.   
      - name: census_division_type
        description: |
          The census division type comes from the Canadian government census definitions.
          This current resource contains only CDR (Census Divisions / de recensement) used
          to establish provincial law and facilitate regional planning. Other valid division
          types include TER (territory), CSD (Census Subdivision), MB (Management Board) etc.

          More information can be found here:
          https://www12.statcan.gc.ca/census-recensement/2021/ref/dict/az/definition-eng.cfm?ID=geo008
        tests:
          - accepted_values:
              values: ['CDR']
      - name: land_area
        description: |
          Land area is the area in square kilometres of the land-based portions
          of standard geographic areas. The land area measurements are unofficial
          and are provided for the sole purpose of calculating population density.
      - name: region_code
        description: |
          The two letter international standard denomination for the country's subdivisions established by the ISO-3166-2 code.
          This can be a province, territory, state etc. Uses `raw_region_to_province` macro for parsing of the raw region code.
          If this accepted values test breaks, it means that there was a new region code detected and the logic should be updated
          to handle the new values if possible.
        tests:
          - accepted_values:
              values: ['NL', 'PE', 'NS', 'NB', 'NB', 'QC', 'ON', 'MB', 'SK', 'AB', 'BC', 'YT', 'NT', 'NU']
  - name: statcan_commercial_salmon_catch
    description: |
      A table containing relevant attributes of StatCan commercial salmon catch data from 1996 to 2022.
    columns:
      - name: fishery
        description: |
          Type of gear (gill net, seine, or troll) used in the fishery.
        tests:
          - accepted_values:
              values: ['GILL NET', 'SEINE', 'TROLL']
      - name: estimate_type
        description: |
          Relative time period of the preliminary catch-estimate (in-season or post-season). 
        tests:
          - accepted_values:
              values: ['POST-SEASON', 'IN-SEASON']
      - name: licence_area
        description: |
          Commercial fishery licence area. Definitions of each licence area at https://www.pac.dfo-mpo.gc.ca/fm-gp/licence-permis/areas-secteurs-eng.html.
        tests:
          - accepted_values:
              values: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']
      - name: calendar_year
      - name: mgmt_area
        description: |
          Commercial fishery management area. Geographic locations of management areas at https://www.pac.dfo-mpo.gc.ca/fm-gp/maps-cartes/areas-secteurs/index-eng.html#overview.
      - name: vessel_count
        description: |
          Number of vessels fishing in the management area. This information does not exist for data between the years 1996-2004.
      - name: boat_days
        description: |
          Number of days fished in the management area.
      - name: salmon_type
        description: |
          Type of salmon fished (sockeye, coho, pink, chum, chinook, steelhead). No records on steelhead quantities exist between the years 1996-2004.
      - name: kept
        description: |
          Number of salmon kept of the corresponding type.
      - name: released
        description: |
          Number of salmon released of the corresponding type.This information does not exist for data between the years 1996-2004.
      - name: notes
        description: |
          Notes pertaining to the given record. For any season and management area where there have been less than 3 vessels, data
          is redacted in response to the Government of Canada's Privacy Act. Such records are indicated by the 'redacted' value.
        tests:
          - accepted_values:
              values: ['', 'redacted']
